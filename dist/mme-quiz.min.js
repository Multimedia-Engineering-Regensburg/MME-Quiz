!function(){const e='<div class="mme-quiz-content">\n  </div>\n  <div class="mme-quiz-menu">\n  \t<span class="mme-quiz-button start">Start</span>\n  \t<span class="mme-quiz-button check">Weiter</span>\n  \t<span class="mme-quiz-button next">NÃ¤chste Frage</span>\n  \t<span class="mme-quiz-button result">Ergebnisse</span>\n  \t<span class="mme-quiz-button reset">Neustart</span>\n  </div>',t='<div class="mme-quiz-spinner">\n  \t\t\t\t\t\t<div></div>\n  \t\t\t\t\t\t<div></div>\n  \t\t\t\t\t\t<div></div>\n  \t\t\t\t\t\t</div>\n  \t\t\t\t\t  <div class="mme-quiz-spinner-info">Lade Quiz ...</div>';var s,n;TITLE_TEMPLATE='<span class="mme-quiz-title"></span><span class="mme-quiz-description"></span>',QUESTION_TEMPLATE='<span class="mme-quiz-title"></span><span class="mme-quiz-description"></span><ul class="mme-quiz-answers"></ul><span class="mme-quiz-explanation"></span>',ANSWER_TEMPLATE='<li data-question-id>\n    \t\t<label class="mme-quiz-answer-container"><span class="mme-quiz-answer-text"></span>\n  \t\t\t\t<input type="checkbox">\n  \t\t\t\t<span class="mme-quiz-answer-checkmark"></span>\n  \t\t\t\t<span class="mme-quiz-answer-result"></span>\n\t\t\t</label>\n\t\t</li>',END_TEMPLATE='<span class="mme-quiz-result-title">Ergebnisse</span><span class="mme-quiz-result-text">Sie haben <span class="mme-quiz-correct-answers"></span> von <span class="mme-quiz-number-of-questions"></span> Fragen korrekt beanwortet.</span>';class i{constructor(e){this.el=e,this.reset()}reset(){let s=this;var n;this.el.innerHTML=t,(n=this.el.getAttribute("data-url"),new Promise(async function(e,t){let s=await fetch(n);e(await s.text())})).then(function(t){let n=function(e){let t=e.split("\n"),s={},n=void 0;for(let e=0;e<t.length;e++){let i=t[e];""!==i&&(i.startsWith("# ")?(s.title=i.split("# ")[1],s.description=t[++e]):i.startsWith("## ")?(void 0===s.questions&&(s.questions=[]),(n=s.questions[s.questions.push({})-1]).questionID=s.questions.length,n.question=i.split("## ")[1],n.answers=[]):i.startsWith("? ")?n.description=i.split("? ")[1]:i.startsWith("! ")?n.explanation=i.split("! ")[1]:i.startsWith("+ ")?n.answers.push({answerID:n.answers.length,text:i.split("+ ")[1],isCorrect:!0}):i.startsWith("- ")&&n.answers.push({answerID:n.answers.length,text:i.split("- ")[1],isCorrect:!1}))}return s}(t);var i;s.title=n.title,s.description=n.description,s.questions=n.questions,s.numberOfQuestions=s.questions.length,s.correctAnswers=0,(i=s).el.innerHTML=e,i.ui={startButton:i.el.querySelector(".mme-quiz-button.start"),checkButton:i.el.querySelector(".mme-quiz-button.check"),nextButton:i.el.querySelector(".mme-quiz-button.next"),resultButton:i.el.querySelector(".mme-quiz-button.result"),resetButton:i.el.querySelector(".mme-quiz-button.reset")},i.ui.startButton.addEventListener("click",i.onStartButtonClicked.bind(i)),i.ui.checkButton.addEventListener("click",i.onCheckButtonClicked.bind(i)),i.ui.checkButton.classList.add("mme-quiz-hidden"),i.ui.nextButton.addEventListener("click",i.onNextButtonClicked.bind(i)),i.ui.nextButton.classList.add("mme-quiz-hidden"),i.ui.resultButton.addEventListener("click",i.onFinished.bind(i)),i.ui.resultButton.classList.add("mme-quiz-hidden"),i.ui.resetButton.addEventListener("click",i.reset.bind(i)),i.ui.resetButton.classList.add("mme-quiz-hidden"),function(e){e.el.querySelector(".mme-quiz-content").innerHTML=TITLE_TEMPLATE,e.el.querySelector(".mme-quiz-title").innerHTML=e.title,e.el.querySelector(".mme-quiz-description").innerHTML=e.description}(s)})}showNextQuestion(){0!==this.questions.length&&(this.currentQuestion=this.questions.shift(),function(e){let t;e.el.querySelector(".mme-quiz-content").innerHTML=QUESTION_TEMPLATE,e.el.querySelector(".mme-quiz-title").innerHTML=e.currentQuestion.question,e.el.querySelector(".mme-quiz-description").innerHTML=e.currentQuestion.description,t=e.el.querySelector(".mme-quiz-answers");for(let s=0;s<e.currentQuestion.answers.length;s++){let n=e.currentQuestion.answers[s],i=document.createElement("div");i.innerHTML=ANSWER_TEMPLATE,i.querySelector("li").setAttribute("data-answer-id",n.answerID),i.querySelector(".mme-quiz-answer-text").innerHTML=n.text,t.appendChild(i.firstChild)}e.ui.startButton.classList.add("mme-quiz-hidden"),e.ui.nextButton.classList.add("mme-quiz-hidden"),e.ui.checkButton.classList.remove("mme-quiz-hidden")}(this))}showResultScreen(){!function(e,t){let s=e.el.querySelectorAll("li"),n=!0;for(let t=0;t<s.length;t++){let i=e.currentQuestion.answers[s[t].getAttribute("data-answer-id")],r=s[t].querySelector("input").checked===i.isCorrect,u=!0===s[t].querySelector("input").checked&&!0===i.isCorrect,l=!0===s[t].querySelector("input").checked&&!1===i.isCorrect;!1===r&&(n=!1),!0===u&&(s[t].querySelector(".mme-quiz-answer-result").innerHTML="Korrekt!",s[t].querySelector(".mme-quiz-answer-result").classList.add("correct-answer"),s[t].querySelector(".mme-quiz-answer-result").classList.remove("wrong-answer")),!0===l&&(s[t].querySelector(".mme-quiz-answer-result").classList.add("wrong-answer"),s[t].querySelector(".mme-quiz-answer-result").classList.remove("correct-answer"),s[t].querySelector(".mme-quiz-answer-result").innerHTML="Falsch!")}!0===n&&(e.correctAnswers+=1),e.el.querySelector(".mme-quiz-explanation").innerHTML=e.currentQuestion.explanation,e.ui.checkButton.classList.add("mme-quiz-hidden"),!1===t?e.ui.nextButton.classList.remove("mme-quiz-hidden"):e.ui.resultButton.classList.remove("mme-quiz-hidden")}(this,0===this.questions.length)}start(){this.showNextQuestion()}onFinished(){var e;console.log("Finished"),(e=this).el.querySelector(".mme-quiz-content").innerHTML=END_TEMPLATE,e.el.querySelector(".mme-quiz-correct-answers").innerHTML=e.correctAnswers,e.el.querySelector(".mme-quiz-number-of-questions").innerHTML=e.numberOfQuestions,e.ui.resultButton.classList.add("mme-quiz-hidden"),e.ui.resetButton.classList.remove("mme-quiz-hidden")}onStartButtonClicked(){console.log("start button clicked"),this.start()}onCheckButtonClicked(){console.log("check button clicked"),this.showResultScreen()}onNextButtonClicked(){console.log("next button clicked"),this.showNextQuestion()}}(s={}).init=function(){let e=document.querySelectorAll(".mme-quiz-wrapper");n=[];for(let t=0;t<e.length;t++){let s=new i(e[t]);s&&n.push(s)}},window.MMEQuiz=s}(),MMEQuiz.init();